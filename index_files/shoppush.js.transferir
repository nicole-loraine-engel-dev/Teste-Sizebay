!function(){function e(n,i,t){function o(s,a){if(!i[s]){if(!n[s]){var d="function"==typeof require&&require;if(!a&&d)return d(s,!0);if(r)return r(s,!0);var p=new Error("Cannot find module '"+s+"'");throw p.code="MODULE_NOT_FOUND",p}var c=i[s]={exports:{}};n[s][0].call(c.exports,function(e){var i=n[s][1][e];return o(i||e)},c,c.exports,e,n,i,t)}return i[s].exports}for(var r="function"==typeof require&&require,s=0;s<t.length;s++)o(t[s]);return o}return e}()({1:[function(e,n,i){(function(e){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(i,t){function o(e){var n;return n=e.indexOf("://")>-1?e.split("/")[2]:e.split("/")[0],n=n.split(":")[0],"https://"+n}function r(e){var n=e.origin||e.originalEvent.origin;if(k){if(document.referrer.indexOf(n)===-1)return!1;"communication_successful"!==e.data.information||N||(N=e.source,m()),"close_window"===e.data.information&&l()}else{if(n.indexOf(".shoppush.com.br")===-1&&n.indexOf(".pushback.me")===-1)return!1;"enable_communication"!==e.data.information||N||(N=!0,E.postMessage({information:"communication_successful"},O)),"save_endpoint"===e.data.information&&e.data.endpoint&&p(e.data.endpoint,e.data.keys),"delete_endpoint"===e.data.information&&p(!1,!1,!0)}}function s(e){var n=document.createElement("iframe");n.setAttribute("src","about:blank"),n.setAttribute("name","sp_iframe"),n.setAttribute("id","sp_iframe"),n.style.width="10px",n.style.height="10px",document.body.appendChild(n);var i=0,t=0,r=window.innerWidth||document.documentElement.clientWidth||screen.width,s=window.innerHeight||document.documentElement.clientHeight||screen.height,a=window.screen_left?window.screen_left:screen.left,d=window.screen_top?window.screen_top:screen.top,p=r/2-i/2+a,c=s/3-t/2+d,u="fullscreen=no, width="+i;u+=", height="+t+", top="+c+", left="+p,O=o(e);var f=window.open(e,"sp_iframe",u);E=f,_()}function a(e){var n=document.createElement("iframe");n.setAttribute("src","about:blank"),n.setAttribute("name","sp_iframe"),n.setAttribute("id","sp_iframe"),n.style.width="10px",n.style.height="10px",document.body.appendChild(n);var i=640,t=520,r=window.innerWidth||document.documentElement.clientWidth||screen.width,s=window.innerHeight||document.documentElement.clientHeight||screen.height,a=window.screen_left?window.screen_left:screen.left,d=window.screen_top?window.screen_top:screen.top,p=r/2-i/2+a,c=s/3-t/2+d,u="fullscreen=no, width="+i;u+=", height="+t+", top="+c+", left="+p,O=o(e);var f=window.open(e,"sp_iframe",u);E=f,_()}function d(e){var n=1e3,i=500,t=window.innerWidth||document.documentElement.clientWidth||screen.width,r=window.innerHeight||document.documentElement.clientHeight||screen.height,s=window.screen_left?window.screen_left:screen.left,a=window.screen_top?window.screen_top:screen.top,d=t/2-n/2+s,p=r/3-i/2+a,c="fullscreen=no, width="+n;c+=", height="+i+", top="+p+", left="+d,O=o(e);var u=window.open(e,"",c);E=u,_()}function p(e,n,t){n||(n=JSON.stringify("{}")),i.setMetadata("contact",{type:"webpush",value:e,keys:n,active:t!==!0}),l(!0)}function c(n,i){if(n!==!1){var t=g();if("Safari"==t.name&&"undefined"!=typeof window.safari.pushNotification)o=n;else{n=JSON.parse(n);var o=n.endpoint.lastIndexOf("/");o>-1&&(o=n.endpoint.substring(o+1));var r=JSON.stringify(n.keys)}if(o&&(k?N.postMessage({information:"save_endpoint",endpoint:o,keys:r},document.referrer):p(o,r)),133==window._st_account)try{e.reportUserPushSubscribe({endpoint:o,subscriberID:window.shopback.customer_id})}catch(s){console.log("Error when try to call the push event")}}else if(i===!0){if(133==window._st_account)try{e.reportUserPushUnsubscribe({endpoint:o,subscriberID:window.shopback.customer_id})}catch(s){console.log("Error when try to call the push event")}k?N.postMessage({information:"delete_endpoint"},document.referrer):p(!1,!1,!0)}}function u(){self.worker.pushManager.subscribe({userVisibleOnly:!0}).then(function(e){c(JSON.stringify(e))})["catch"](function(e){c(!1,!0)})}function f(){return"granted"===Notification.permission?(self.worker.pushManager.getSubscription().then(function(e){return e?void c(JSON.stringify(e)):void u()})["catch"](function(e){c(!1)}),!0):("denied"!==Notification.permission?u():c(!1,!0),!1)}function m(){var n=g();if("Safari"==n.name&&"undefined"!=typeof window.safari.pushNotification){var i=window.safari.pushNotification.permission(x);y(i)}else{if(!("Notification"in e||"Notification"in window))return void console.log("This browser does not support system notifications");"serviceWorker"in navigator&&navigator.serviceWorker.register("/service-worker.js").then(function(){return navigator.serviceWorker.ready}).then(function(e){return self.worker=e,f()})["catch"](function(e){console.log("Service Worker error: ",e)})}}function l(e){return k?t.close_callback?void t.close_callback():void window.close():("string"==typeof t.campaign_id&&(e?i.setCookie("sback_campaign_"+t.campaign_id,"closed",8640):i.setCookie("sback_campaign_"+t.campaign_id,"closed",0,S)),void(E&&E.postMessage({information:"close_window"},O)))}function w(e,o,r,s,p,c){if(!k&&"object"===("undefined"==typeof o?"undefined":n(o))&&"object"===("undefined"==typeof p?"undefined":n(p)))if(r=parseInt(r),o.secure===!0){var u=document.createElement("link");u.id="shoppush-manifest",u.rel="manifest",u.href="/"+s+"?nocache="+(new Date).getTime(),document.head.appendChild(u),m()}else{t.campaign_id=e,p.popup_domain=o.domain,p.popup_subdomain=o.subdomain,p.popup_image=o.icon.url;var f="/";"undefined"!=typeof c&&"undefined"!=typeof c.poupup&&("undefined"!=typeof c.poupup.wants_send&&(p.popup_wants_send=c.poupup.wants_send),"undefined"!=typeof c.poupup.notification_title&&(p.popup_notification_title=c.poupup.notification_title),"undefined"!=typeof c.poupup.notification_message&&(p.popup_notification_message=c.poupup.notification_message),"undefined"!=typeof c.poupup.layout&&(f+=c.poupup.layout)),"undefined"!=typeof window.shopback.sp_use_iframe&&window.shopback.sp_use_iframe?a("https://"+o.subdomain+f+"?campaign_id="+e+"&client_id="+i.client_id+"&customer_id="+i.customer_id+"&metadata="+encodeURIComponent(JSON.stringify(p))):d("https://"+o.subdomain+f+"?campaign_id="+e+"&client_id="+i.client_id+"&customer_id="+i.customer_id+"&metadata="+encodeURIComponent(JSON.stringify(p)))}}function h(e,o,r,a,d,p){if(!k&&"object"===("undefined"==typeof o?"undefined":n(o))&&"object"===("undefined"==typeof d?"undefined":n(d)))if(r=parseInt(r),o.secure===!0){var c=document.createElement("link");c.id="shoppush-manifest",c.rel="manifest",c.href="/"+a+"?nocache="+(new Date).getTime(),document.head.appendChild(c),m()}else{t.campaign_id=e,d.popup_domain=o.domain,d.popup_subdomain=o.subdomain,d.popup_image=o.icon.url;var u="/";"undefined"!=typeof p&&"undefined"!=typeof p.poupup&&("undefined"!=typeof p.poupup.wants_send&&(d.popup_wants_send=p.poupup.wants_send),"undefined"!=typeof p.poupup.notification_title&&(d.popup_notification_title=p.poupup.notification_title),"undefined"!=typeof p.poupup.notification_message&&(d.popup_notification_message=p.poupup.notification_message),"undefined"!=typeof p.poupup.layout&&(u+=p.poupup.layout)),s("https://"+o.subdomain+u+"?campaign_id="+e+"&client_id="+i.client_id+"&customer_id="+i.customer_id+"&metadata="+encodeURIComponent(JSON.stringify(d)))}}function _(){window.addEventListener("message",r,!1),k&&window.opener&&window.opener.postMessage({information:"enable_communication"},document.referrer)}function g(){var e,n=navigator.userAgent,i=n.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];return/trident/i.test(i[1])?(e=/\brv[ :]+(\d+)/g.exec(n)||[],"IE "+(e[1]||"")):"Chrome"===i[1]&&(e=n.match(/\b(OPR|Edge)\/(\d+)/),null!=e)?e.slice(1).join(" ").replace("OPR","Opera"):(i=i[2]?[i[1],i[2]]:[navigator.appName,navigator.appVersion,"-?"],null!=(e=n.match(/version\/(\d+)/i))&&i.splice(1,1,e[1]),{name:i[0],version:parseInt(i[1])})}function b(){return"https://api.shopback.net/clients/"+i.client_id+"/customers/"+i.customer_id}function y(e){var n=e.permission;if("default"===n)window.safari.pushNotification.requestPermission(b(),x,{},y);else{var i="undefined"!==e.deviceToken&&e.deviceToken,t="granted"===n;c(i,t)}}function v(){if(t.is_popup){k=!0;var e=document.createElement("link");e.id="shoppush-manifest",e.rel="manifest",e.href="/manifest.json",document.head.appendChild(e),_()}else t.showRequest=w,t.updateWebpushSubscription=h}var k=!1,O=!1,E=!1,N=!1,S=28800,x="web.br.com.shopback.sdk";v()}(window.shopback=window.shopback||{},window.shoppush=window.shoppush||{})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[1]);