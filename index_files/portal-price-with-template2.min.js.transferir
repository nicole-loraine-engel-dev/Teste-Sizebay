(function(){var e,t,i=function(e,t){return function(){return e.apply(t,arguments)}},s=[].slice;(t=window||exports).EVENT_HISTORY||(t.EVENT_HISTORY={}),e=function(){function e(){this.generateSelectors=i(this.generateSelectors,this),this.triggerProductEvent=i(this.triggerProductEvent,this),this.bindProductEvent=i(this.bindProductEvent,this)}return e.prototype.bindProductEvent=function(e,t,i){var r,n,c,l,o,u;if(null==i&&(i=0),r=function(e,t,r){var n;if($(window).on(e,function(){var e,n,c;if(n=arguments[0],c=(e=2<=arguments.length?s.call(arguments,1):[])[i],r===c)return t.apply(null,[n].concat(s.call(e)))}),null!=(null!=(n=EVENT_HISTORY[r])?n[e]:void 0))return t.apply(null,EVENT_HISTORY[r][e])},this.options.multipleProductIds){for(u=[],c=0,l=(o=this.productId).length;c<l;c++)n=o[c],u.push(r(e,t,n));return u}return r(e,t,this.productId)},e.prototype.triggerProductEvent=function(){var e,t,i,r,n,c;return n=arguments[0],e=2<=arguments.length?s.call(arguments,1):[],i=this.element||$window,r=jQuery.Event(n),t=[this.productId].concat(s.call(e)),i.trigger(r,t),EVENT_HISTORY[c=this.productId]||(EVENT_HISTORY[c]={}),EVENT_HISTORY[this.productId][n]=[r].concat(s.call(t))},e.prototype.generateSelectors=function(e){var t,i,s=this;for(t in e)i=e[t],this["find"+t]="function"==typeof i?i:function(e){return function(){return s.element.find(e)}}(i),this["findFirst"+t]=function(e){return function(){return $(s["find"+e]()[0])}}(t),this["show"+t]=function(e){return function(){return s["find"+e]().show()}}(t),this["hide"+t]=function(e){return function(){return s["find"+e]().hide()}}(t);return this.showAll=function(e){return function(){var r;for(t in r=[],e)i=e[t],r.push(s["show"+t]());return r}}(e),this.hideAll=function(e){return function(){var r;for(t in r=[],e)i=e[t],r.push(s["hide"+t]());return r}}(e)},e}(),t.ProductComponent=e}).call(this),function(){function e(e,i){return e.section(i._get(!1,["product"]),i,{block:t},null).section(i._get(!1,["accessories"]),i,{block:l},null).section(i._get(!1,["total"]),i,{block:o},null)}function t(e,t){return e.write('<div class="productPrice"><p class="descricao-preco">').section(t._get(!1,["available"]),t,{block:i},null).write('</p><p class="preco-a-vista price-cash">').section(t._get(!1,["available"]),t,{block:n},null).write("</p>").section(t._get(!1,["hasDiscount"]),t,{block:c},null).write("</div>")}function i(e,t){return e.section(t._get(!1,["validListPrice"]),t,{block:s},null).section(t._get(!1,["validBestPrice"]),t,{block:r},null).write('<em class="valor-dividido price-installments" style="display: block"><span><span>ou <label class="skuBestInstallmentNumber">').reference(t._get(!1,["installments"]),t,"h").write('<span class="x">x</span></label> de </span><strong><label class="skuBestInstallmentValue">').reference(t._get(!1,["installmentsValue"]),t,"h",["intAsCurrency"]).write("</label></strong></span></em>")}function s(e,t){return e.write('<em class="valor-de price-list-price" style="display: block">').reference(t._get(!1,["strings","listPrice"]),t,"h").write('<strong class="skuListPrice">').reference(t._get(!1,["listPrice"]),t,"h",["intAsCurrency"]).write("</strong></em>")}function r(e,t){return e.write('<em class="valor-por price-best-price" style="display: block">').reference(t._get(!1,["strings","bestPrice"]),t,"h").write('<strong class="skuBestPrice">').reference(t._get(!1,["bestPrice"]),t,"h",["intAsCurrency"]).write("</strong></em>")}function n(e,t){return e.write('Preço a vista:<strong class="skuPrice">').reference(t._get(!1,["spotPrice"]),t,"h",["intAsCurrency"]).write("</strong>")}function c(e,t){return e.write('<em class="economia-de">').reference(t._get(!1,["strings","discountOf"]),t,"h").write(' <span class="economia">').reference(t._get(!1,["discount"]),t,"h",["intAsCurrency"]).write("</span></em>")}function l(e,t){return e.write('<div class="accessoriesPrice"><em class="accessoriesPriceText">Acessórios:</em><p class="descricao-preco"><em class="valor-de price-list-price" style="display: block">').reference(t._get(!1,["string","listPrice"]),t,"h").write('<strong class="skuListPrice">').reference(t._get(!1,["listPrice"]),t,"h",["intAsCurrency"]).write('</strong></em><em class="valor-por price-best-price" style="display: block">').reference(t._get(!1,["string","bestPrice"]),t,"h").write('<span class="skuBestPrice">').reference(t._get(!1,["bestPrice"]),t,"h",["intAsCurrency"]).write("</span></em></p></div>")}function o(e,t){return e.write('<div class="totalPrice"><em class="totalPriceText">Total:</em><p class="descricao-preco"><em class="valor-de price-list-price" style="display: block">').reference(t._get(!1,["string","listPrice"]),t,"h").write('<strong class="skuListPrice">').reference(t._get(!1,["listPrice"]),t,"h",["intAsCurrency"]).write('</strong></em><em class="valor-por price-best-price" style="display: block">').reference(t._get(!1,["string","bestPrice"]),t,"h").write('<span class="skuBestPrice">').reference(t._get(!1,["bestPrice"]),t,"h",["intAsCurrency"]).write("</span></em></p></div>")}dust.register("price",e)}(),function(){function e(e,i){return e.write("\x3c!-- price modal --\x3e").section(i._get(!1,["product"]),i,{block:t},null)}function t(e,t){return e.write('<div class="vtexsc-skuProductPrice skuselector-price"><div class="regularPrice skuselector-list-price price-list-price">De: <span class="value">').reference(t._get(!1,["listPrice"]),t,"h",["intAsCurrency"]).write('</span></div><div class="newPrice skuselector-best-price price-best-price">Por: <span class="value">').reference(t._get(!1,["bestPrice"]),t,"h",["intAsCurrency"]).write('</span></div><div class="installment price-installments">ou até ').reference(t._get(!1,["installments"]),t,"h").write(" de ").reference(t._get(!1,["installmentsValue"]),t,"h",["intAsCurrency"]).write("</div></div>")}dust.register("price-modal",e)}(),function(){var e,t,i=function(e,t){return function(){return e.apply(t,arguments)}},s={}.hasOwnProperty;e=window.jQuery,_.extend(dust.filters,{intAsCurrency:function(e){return _.intAsCurrency(e)}}),_.currencyToInt=function(e){return+e.replace(/\D/gi,"")},t=function(t){function r(e,t,s){this.element=e,this.productId=t,this.options=s,this.getTotal=i(this.getTotal,this),this.getAccessoriesTotal=i(this.getAccessoriesTotal,this),this.accessoriesUpdated=i(this.accessoriesUpdated,this),this.skuUnselected=i(this.skuUnselected,this),this.skuSelected=i(this.skuSelected,this),this.bindEvents=i(this.bindEvents,this),this.update=i(this.update,this),this.hideAllPrice=i(this.hideAllPrice,this),this.render=i(this.render,this),this.getSku=i(this.getSku,this),this.getDefaultStringsFromHtml=i(this.getDefaultStringsFromHtml,this),this.sku=null,this.generateSelectors({ListPrice:".price-list-price",BestPrice:".price-best-price",Savings:".price-savings",Installments:".price-installments",CashPrice:".price-cash",OriginalListPrice:".skuListPrice",OriginalBestPrice:".skuBestPrice",OriginalSpotPrice:".skuPrice",OriginalInstallments:".skuBestInstallmentNumber",OriginalInstallmentsValue:".skuBestInstallmentValue"}),this.options.modalLayout||this.getDefaultStringsFromHtml(),this.bindEvents()}return function(e,t){for(var i in t)s.call(t,i)&&(e[i]=t[i]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(r,ProductComponent),r.prototype.getDefaultStringsFromHtml=function(){var t,i;return(t=e(e(".valor-de")[0]).clone()).find("strong").remove(),this.options.strings.listPrice=t.text()||"De: ",(i=e(e(".valor-por")[0]).clone()).find("strong").remove(),this.options.strings.bestPrice=i.text()||"Por: "},r.prototype.getSku=function(){var e;return(e=this.sku||{listPrice:_.currencyToInt(this.findFirstOriginalListPrice().text()),bestPrice:_.currencyToInt(this.findFirstOriginalBestPrice().text()),spotPrice:_.currencyToInt(this.findFirstOriginalSpotPrice().text()),installments:parseInt(this.findFirstOriginalInstallments().text()),installmentsValue:_.currencyToInt(this.findFirstOriginalInstallmentsValue().text()),available:!0}).hasDiscount=!!e.bestPrice&&(e.discount=e.listPrice-e.bestPrice)>0,e.validListPrice=!!e.listPrice&&e.listPrice>e.bestPrice,e.validBestPrice=!!e.bestPrice,e},r.prototype.render=function(){var e,t=this;return this.options.modalLayout?dust.render("price-modal",{product:this.sku,strings:this.options.strings},function(e,i){if(e)throw new Error("Price-modal Dust error: "+e);return t.element.html(i),t.update()}):null===(e={product:this.getSku(),accessories:this.getAccessoriesTotal(),total:this.getTotal(),strings:this.options.strings}).product||0===e.product.listPrice&&0===e.product.bestPrice?void 0:dust.render("price",e,function(e,i){if(e)throw new Error("Price Dust error: "+e);return t.element.html(i),t.update()})},r.prototype.hideAllPrice=function(){return this.hideBestPrice(),this.hideListPrice(),this.hideSavings(),this.hideCashPrice(),this.hideInstallments()},r.prototype.update=function(){var e;if(this.hideAllPrice(),(e=this.getSku()).available&&(this.showBestPrice(),null!=e.bestPrice&&e.bestPrice<e.listPrice&&(this.showListPrice(),this.showSavings()),null!=e.installments&&e.installments>1))return this.showInstallments(),this.showCashPrice()},r.prototype.bindEvents=function(){return this.bindProductEvent("skuSelected.vtex",this.skuSelected),this.bindProductEvent("skuUnselected.vtex",this.skuUnselected),this.bindProductEvent("accessoriesUpdated.vtex",this.accessoriesUpdated)},r.prototype.skuSelected=function(e,t,i){return this.sku=i,this.render()},r.prototype.skuUnselected=function(e,t,i){return this.sku=null,this.render()},r.prototype.accessoriesUpdated=function(e,t,i){return this.accessories=i,this.render()},r.prototype.getAccessoriesTotal=function(){var e,t,i,s,r,n;if(null!=(r=this.accessories)?r.length:void 0){for(t={listPrice:0,bestPrice:0},i=0,s=(n=this.accessories).length;i<s;i++)(e=n[i]).quantity>0&&(t.listPrice+=e.listPrice,t.bestPrice+=e.bestPrice);return t}},r.prototype.getTotal=function(){var e,t,i,s,r,n;if(null!=(r=this.accessories)?r.length:void 0){for(t={listPrice:this.getSku().listPrice,bestPrice:this.getSku().bestPrice},i=0,s=(n=this.accessories).length;i<s;i++)(e=n[i]).quantity>0&&(t.listPrice+=e.listPrice,t.bestPrice+=e.bestPrice);return t}},r}(),e.fn.price=function(i,s){var r,n,c,l,o,u,a;for(n=e.extend({},e.fn.price.defaults),u=0,a=this.length;u<a;u++)l=this[u],c=(r=e(l)).data(),o=e.extend(!0,n,c,s),r.data("price")||r.data("price",new t(r,i,o));return this},e.fn.price.defaults={originalSku:null,modalLayout:!1,strings:{listPrice:"De: ",bestPrice:"Por: ",discountOf:"Economia de "}}}.call(this);